# BOJ Helper 앱 분석 보고서

> 작성일: 2026-01-26
> 버전: 1.0.0 (수정본)

## 앱 개요

BOJ Helper는 백준 온라인 저지 사용자를 위한 학습 대시보드 앱입니다. solved.ac API를 통해 풀이 데이터를 분석하고 맞춤형 문제 추천과 학습 목표 관리를 제공합니다.

**기술 스택**: React Native (Expo) + tRPC + Drizzle ORM + MySQL

**탭 구성**: 대시보드 / 분석 / 추천 / 목표 / 설정

---

## 1. 디자인 문서 대비 미구현 기능

### 1.1 화면/페이지

| 기능 | 디자인 문서 | 현재 상태 | 비고 |
|------|------------|----------|------|
| **문제 상세 화면** | 문제 정보, 추천 이유, 메모 입력, 북마크 | ✅ 구현됨 | `app/problem/[id].tsx` — 문제 정보, 추천 이유, 메모, 북마크, BOJ 링크 |
| **태그 상세 화면** | 특정 태그 분석 상세 + 문제 목록 | ❌ 미구현 | 분석 화면 태그 항목이 단순 View, 탭/네비게이션 없음 |
| **초기 동기화 화면** | 별도 진행 상태 화면 | ❌ 미구현 | 연결 후 백그라운드 동기화, 바로 대시보드 이동 |

### 1.2 대시보드 기능

| 기능 | 디자인 문서 | 현재 상태 |
|------|------------|----------|
| **주간 풀이 추세 차트** | 최근 7일 바 차트 | ❌ 미구현 |
| **연속 풀이일 (스트릭)** | KPI 카드에 표시 | ❌ 미구현 |
| **평균 난이도 표시** | KPI 카드 | ❌ 미구현 |

> 현재 대시보드 KPI: 총 해결 / 최근 7일 / 최근 30일 (3개만)

### 1.3 분석 화면 기능

| 기능 | 디자인 문서 | 현재 상태 |
|------|------------|----------|
| **세그먼트 컨트롤** | 태그별/난이도별 전환 | ❌ 미구현 |
| **난이도별 분석 뷰** | 티어별 분포 차트 | ❌ 미구현 |
| **태그 탭 → 상세 이동** | 탭하면 태그 상세로 | ❌ 미구현 |

> 현재: 태그 목록만 렌더링 (탭 불가)

### 1.4 추천 화면 기능

| 기능 | 디자인 문서 | 현재 상태 | 비고 |
|------|------------|----------|------|
| **난이도 범위 필터** | 슬라이더 UI | ✅ 구현됨 | `recommendations.tsx` — 프리셋·범위·필터 모달 |
| **태그 필터** | 다중 선택 UI | ✅ 구현됨 | 필터 모달 내 태그 다중 선택 |
| **"미해결만" 토글** | 토글 스위치 | ❌ UI 없음 | API는 지원 |
| **"풀었음" 체크 버튼** | 문제 카드에 표시 | ❌ 미구현 | 북마크 아이콘만 존재 |

### 1.5 목표 화면 기능

| 기능 | 디자인 문서 | 현재 상태 |
|------|------------|----------|
| **태그 집중 목표 시 태그 선택** | 다중 선택 UI | ❌ 미구현 |
| **목표 수정 기능** | 수정 화면 | ❌ 미구현 (삭제만 가능) |
| **완료된 목표 접힘** | 아코디언/Collapsible | ❌ 미구현 (단순 리스트) |

---

## 2. 기능적 보완점

### 2.1 핵심 기능 미흡

| 문제점 | 설명 | 심각도 |
|--------|------|--------|
| **목표 진행도 자동 업데이트** | ✅ 구현됨 — `sync.ts`에서 `updateGoalProgress` 호출, `db.updateGoalProgress`로 갱신 | — |
| **문제 메모 기능 UI** | `updateNote` API 존재, 문제 상세 화면에 메모 UI 구현됨 | — |
| **풀이 상태 수동 변경 UI 없음** | `updateStatus` API 존재, UI 미구현 | 🟡 중간 |
| **동기화 진행 상태 실시간 표시** | ✅ 구현됨 — `sync.status` 1초 폴링, `SyncProgressModal`에서 진행률 표시 | — |
| **북마크 목록 화면 없음** | `problems.bookmarked` API 존재, 전용 화면 없음 | 🟡 중간 |

### 2.2 데이터 분석 한계

| 문제점 | 설명 | 영향 |
|--------|------|------|
| **정확한 풀이 시간 데이터 없음** | 동기화 시 모든 문제의 `solvedAt`이 현재 시간으로 설정됨 | 최근성 분석 부정확 |
| **ATTEMPTED 상태 미활용** | enum에 존재하고 API로 설정 가능하나, UI 흐름 없음 | 약점 분석 한계 |
| **시계열 스냅샷 활용 안 됨** | `user_tag_stats.snapshotDate`로 스냅샷 저장은 되나, UI에서 추세 분석 미제공 | 성장 그래프 불가 |

### 2.3 사용자 경험 (UX) 개선 필요

| 문제점 | 설명 |
|--------|------|
| **에러 메시지 처리** | ✅ 개선됨 — 동기화/목표 등 mutation에 토스트 피드백 적용, API 오류 시 프로덕션에서 공개용 메시지 치환 |
| **로딩 스켈레톤** | 🟡 부분 — 대시보드·추천 스켈레톤 있음, 일부 화면은 ActivityIndicator |
| **빈 상태 화면** | 🟡 부분 — 목표 등 빈 상태 문구 있음 |
| **새로고침 피드백** | ✅ 개선됨 — 동기화 완료/실패 토스트, 목표 생성/삭제 토스트 |
| **다크모드 토글** | ✅ 구현됨 — 설정 화면에 다크 모드 스위치 있음 |

---

## 3. 기술적 보완점

### 3.1 코드 품질 및 아키텍처

| 항목 | 현재 상태 | 권장 사항 |
|------|----------|----------|
| **에러 바운더리** | ✅ 구현됨 | `components/error-boundary.tsx`, 루트 레이아웃 적용 |
| **테스트 코드** | 🟡 기본 테스트 존재 (`tests/`, `server/__tests__/`) | 커버리지 확대 필요 |
| **로깅/모니터링** | ✅ 구현됨 | Sentry (`lib/sentry.ts`) 도입, ErrorBoundary에서 captureException |
| **타입 안전성** | 🟡 부분적 - 일부 `any` 타입 사용 | 엄격한 타입 정의 |
| **캐시 전략** | 🟡 기본값 사용 | `staleTime`, `gcTime` 최적화 |

> **참고**: 테스트 파일 존재
> - `tests/auth.logout.test.ts`
> - `server/__tests__/routers.test.ts`
> - `server/__tests__/solvedac.test.ts`

### 3.2 성능 최적화

| 항목 | 현재 상태 | 권장 사항 |
|------|----------|----------|
| **리스트 가상화** | ❌ `ScrollView` 사용 | `FlatList` + `getItemLayout` |
| **이미지 최적화** | 🟡 없음 | 티어 배지 캐싱 |
| **번들 사이즈** | 미분석 | 코드 스플리팅 검토 |
| **오프라인 지원** | ❌ 없음 | AsyncStorage + 캐시 전략 |

### 3.3 보안

| 항목 | 현재 상태 | 권장 사항 |
|------|----------|----------|
| **Rate Limiting** | 🟡 동기화만 (10분 간격) | 전역 Rate Limiting 추가 |
| **입력 검증** | 🟡 부분적 | 모든 입력에 Zod 스키마 |
| **SQL Injection** | ✅ Drizzle ORM 사용 | 안전 |

### 3.4 접근성 및 국제화

| 항목 | 현재 상태 | 권장 사항 |
|------|----------|----------|
| **접근성 (a11y)** | ❌ 없음 | `accessibilityLabel`, 색상 대비 |
| **국제화 (i18n)** | ❌ 한국어만 | react-i18next 도입 |

---

## 4. 데이터베이스 개선 사항

### 4.1 인덱스 추가 권장

✅ **적용됨** — `drizzle/0004_add_performance_indexes.sql` 마이그레이션으로 아래 인덱스 추가됨.

```sql
-- 적용된 인덱스
CREATE INDEX idx_user_status ON user_problem_status (userId, status);
CREATE INDEX idx_user_weak ON user_tag_stats (userId, weakScore);
CREATE INDEX idx_user_generated ON recommendations (userId, generatedAt);
CREATE INDEX idx_user_status_date ON goals (userId, status, endDate);
```

### 4.2 데이터 정합성

| 문제점 | 설명 |
|--------|------|
| **외래 키 제약 없음** | `userId` 컬럼에 FK 제약 없음 |
| **중복 방지 없음** | `userProblemStatus`에 복합 유니크 키 없음 |

---

## 5. 보완 우선순위 리스트

### 🔴 높은 우선순위 (핵심 기능)

1. ~~**문제 상세 화면 구현**~~ ✅ 구현됨
   - 문제 정보, 태그, 추천 이유 표시, 북마크, 메모, BOJ 링크

2. ~~**목표 진행도 자동 업데이트**~~ ✅ 구현됨
   - 동기화 시 `updateGoalProgress` 호출, 목표 달성 시 자동 완료

3. ~~**동기화 진행 상태 실시간 표시**~~ ✅ 구현됨
   - `sync.status` 1초 폴링, `SyncProgressModal` 진행률 바

4. ~~**에러 처리 UI**~~ ✅ 개선됨
   - 토스트 적용, 동기화/목표 등 실패 시 피드백, API 오류 공개용 메시지 치환

### 🟡 중간 우선순위 (UX 개선)

5. **추천 필터 UI** 🟡 부분 구현
   - 난이도 범위·태그 다중 선택 구현됨
   - 미해결만 토글 미구현

6. **북마크 목록 화면**
   - 새 탭 또는 설정 화면 내 섹션

7. **분석 화면 개선**
   - 난이도별 분석 탭 추가
   - 차트 라이브러리 도입 (victory-native 등)

8. **태그 상세 화면**
   - 태그별 문제 목록
   - 난이도 분포 차트

9. ~~**다크모드 토글**~~ ✅ 구현됨
   - 설정 화면에 다크 모드 스위치 있음

10. **로딩 스켈레톤**
    - 주요 화면에 스켈레톤 UI 적용

### 🟢 낮은 우선순위 (품질 개선)

11. **대시보드 차트**
    - 주간 풀이 추세 바 차트
    - 스트릭 카운터

12. **테스트 커버리지 확대**
    - UI 컴포넌트 테스트
    - E2E 테스트

13. **에러 바운더리**
    - 전역 에러 핸들링

14. **시계열 분석 활용**
    - `user_tag_stats` 스냅샷 기반 추세 그래프

15. **오프라인 모드**
    - 캐시 전략 구현
    - 오프라인 시 안내 UI

16. **접근성 개선**
    - 스크린 리더 지원
    - 색상 대비 검토

17. **국제화 준비**
    - 텍스트 리소스 분리
    - i18n 라이브러리 도입

18. **푸시 알림**
    - 목표 마감 알림
    - 일일 문제 추천 알림

---

## 요약

| 분류 | 개수 |
|------|------|
| 디자인 문서 대비 미구현 | 15개 |
| 기능적 보완점 | 10개 |
| 기술적 보완점 | 12개 |
| **총 보완 항목** | **37개** |

### 핵심 요약

**잘 구현된 부분:**
- 계정 연동 (Manus OAuth + BOJ 핸들)
- solved.ac 동기화 (배치 처리, 60초 타임아웃)
- 다중 요소 약점 분석 알고리즘
- 카테고리별 맞춤 추천 (5개 카테고리)
- 학습 목표 생성/삭제

**보완 필요:**
- 문제 상세 화면 (핵심 UX)
- 목표 진행도 자동 업데이트 (핵심 기능)
- 동기화 진행 상태 표시 (UX)
- 추천 필터 UI (기존 API 활용)
- 에러/피드백 처리 (UX)

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0.0 | 2026-01-26 | 최초 작성 |
| 1.0.1 | 2026-01-26 | 테스트 코드 존재 여부 수정, 시계열 스냅샷 설명 보완 |
| 1.1.0 | 2026-02-02 | 출시도 재평가 반영: 문제 상세·목표 진행도·동기화 진행 상태·추천 필터·에러 바운더리/Sentry·다크모드·인덱스·에러 메시지 치환 등 구현/개선 항목 갱신 |
